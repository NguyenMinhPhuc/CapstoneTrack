
{
  "entities": {
    "UserAccount": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserAccount",
      "type": "object",
      "description": "Represents a user account within the CapstoneTrack system, differentiating user roles.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user account."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user account.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "Role of the user account.",
          "enum": [
            "admin",
            "supervisor",
            "student"
          ]
        },
        "status": {
          "type": "string",
          "description": "The status of the user account.",
          "enum": [
            "active",
            "pending",
            "disabled"
          ]
        },
        "studentId": {
          "type": "string",
          "description": "Reference to Student entity, if the user is a student. (Relationship: UserAccount 1:1 Student)"
        },
        "supervisorId": {
          "type": "string",
          "description": "Reference to Supervisor entity, if the user is a supervisor. (Relationship: UserAccount 1:1 Supervisor)"
        }
      },
      "required": [
        "id",
        "email",
        "role",
        "status"
      ]
    },
    "Student": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Student",
      "type": "object",
      "description": "Represents a student within the CapstoneTrack system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the student."
        },
        "studentId": {
          "type": "string",
          "description": "The official student ID number."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the student."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the student."
        },
        "major": {
          "type": "string",
          "description": "Major of the student."
        },
        "enrollmentYear": {
          "type": "number",
          "description": "Year the student enrolled.",
          "format": "number"
        },
        "className": {
          "type": "string",
          "description": "The class name of the student (e.g., '22SE111')."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the student."
        },
        "CCCD": {
          "type": "string",
          "description": "The citizen identification card number of the student."
        },
        "status": {
            "type": "string",
            "description": "The academic status of the student.",
            "enum": ["studying", "reserved", "dropped_out", "graduated"]
        }
      },
      "required": [
        "id",
        "studentId",
        "firstName",
        "lastName",
        "major",
        "enrollmentYear",
        "status"
      ]
    },
    "Supervisor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Supervisor",
      "type": "object",
      "description": "Represents a supervisor within the CapstoneTrack system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the supervisor."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the supervisor."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the supervisor."
        },
        "department": {
          "type": "string",
          "description": "Department of the supervisor."
        },
        "facultyRank": {
          "type": "string",
          "description": "The faculty rank of the supervisor."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "department"
      ]
    },
    "GraduationDefenseSession": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GraduationDefenseSession",
      "type": "object",
      "description": "Represents a period for organizing graduation project defenses.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the defense session."
        },
        "name": {
          "type": "string",
          "description": "Name of the defense session (e.g., 'Spring 2024 Defense')."
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the session.",
          "format": "date"
        },
        "expectedReportDate": {
          "type": "string",
          "description": "The expected date for the final defense reports.",
          "format": "date"
        },
        "registrationDeadline": {
          "type": "string",
          "description": "The deadline for students to register for this defense session.",
          "format": "date"
        },
        "description": {
          "type": "string",
          "description": "A brief description of the session."
        },
        "zaloGroupLink": {
          "type": "string",
          "description": "URL link to the Zalo group for this session."
        },
        "status": {
          "type": "string",
          "description": "The current status of the defense session.",
          "enum": [
            "upcoming",
            "ongoing",
            "completed"
          ]
        }
      },
      "required": [
        "id",
        "name",
        "startDate",
        "expectedReportDate",
        "registrationDeadline",
        "status"
      ]
    },
    "DefenseSessionRegistration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DefenseSessionRegistration",
      "type": "object",
      "description": "Represents a student's registration for a specific defense session, including special exemption status.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the registration."
        },
        "sessionId": {
          "type": "string",
          "description": "Reference to the GraduationDefenseSession this registration belongs to."
        },
        "studentDocId": {
          "type": "string",
          "description": "Reference to the student's document ID in the 'students' collection."
        },
        "studentId": {
          "type": "string",
          "description": "The official student ID number (e.g., 122001306)."
        },
        "studentName": {
          "type": "string",
          "description": "Full name of the student for display purposes."
        },
        "registrationDate": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the registration was created."
        },
        "registrationStatus": {
          "type": "string",
          "description": "The registration status of the student for the defense.",
          "enum": ["reporting", "exempted", "withdrawn"]
        },
        "statusNote": {
            "type": "string",
            "description": "A note explaining the reason for the 'withdrawn' status."
        },
        "exemptionDecisionNumber": {
          "type": "string",
          "description": "The official number of the exemption decision document."
        },
        "exemptionDecisionDate": {
          "type": "string",
          "format": "date",
          "description": "The date when the exemption decision was made."
        },
        "exemptionProofLink": {
          "type": "string",
          "format": "uri",
          "description": "A URL link to the proof document for the exemption."
        }
      },
      "required": [
        "id",
        "sessionId",
        "studentDocId",
        "studentId",
        "studentName",
        "registrationDate",
        "registrationStatus"
      ]
    },
     "DefenseCouncil": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DefenseCouncil",
      "type": "object",
      "description": "Represents a member of the defense council for a specific graduation session.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the council member entry."
        },
        "sessionId": {
          "type": "string",
          "description": "Reference to the GraduationDefenseSession this council belongs to."
        },
        "supervisorId": {
          "type": "string",
          "description": "Reference to the supervisor's document ID in the 'supervisors' collection."
        },
        "name": {
            "type": "string",
            "description": "Full name of the supervisor for display purposes."
        },
        "role": {
          "type": "string",
          "description": "Role of the member within the council.",
          "enum": ["President", "Vice President", "Secretary", "Member"]
        }
      },
      "required": ["id", "sessionId", "supervisorId", "name", "role"]
    },
    "DefenseSubCommittee": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DefenseSubCommittee",
      "type": "object",
      "description": "Represents a sub-committee or panel within a graduation defense session.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the sub-committee."
        },
        "sessionId": {
          "type": "string",
          "description": "Reference to the GraduationDefenseSession this sub-committee belongs to."
        },
        "name": {
          "type": "string",
          "description": "Name of the sub-committee (e.g., 'Ti·ªÉu ban 1 - CNTT')."
        },
        "members": {
            "type": "array",
            "description": "A list of members in this sub-committee.",
            "items": {
                "type": "object",
                "properties": {
                    "supervisorId": {"type": "string"},
                    "name": {"type": "string"},
                    "role": {
                        "type": "string",
                        "enum": ["Head", "Secretary", "Commissioner"]
                    }
                },
                "required": ["supervisorId", "name", "role"]
            }
        }
      },
      "required": ["id", "sessionId", "name", "members"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "rules": "rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    \n    /**\n     * =====================================\n     * üöÄ DEVELOPMENT MODE - FULL ACCESS\n     * =====================================\n     * ‚ö†Ô∏è CH·ªà D√ôNG KHI ƒêANG PH√ÅT TRI·ªÇN\n     * To√†n quy·ªÅn cho m·ªçi ng∆∞·ªùi (bao g·ªìm c·∫£ anonymous).\n     * Khi l√™n production, PH·∫¢I kh√≥a l·∫°i!\n     */\n\n    match /{document=**} {\n      allow read, write: if true;\n    }\n  }\n}\n",
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserAccount"
      },
      "description": "Stores user account information including their role."
    },
    "/students/{studentId}": {
      "schema": {
        "$ref": "#/entities/Student"
      },
      "description": "Stores detailed information about students."
    },
    "/supervisors/{supervisorId}": {
      "schema": {
        "$ref": "#/entities/Supervisor"
      },
      "description": "Stores detailed information about supervisors."
    },
    "/graduationDefenseSessions/{sessionId}": {
      "schema": {
        "$ref": "#/entities/GraduationDefenseSession"
      },
      "description": "Stores information about graduation defense sessions."
    },
    "/defenseRegistrations/{registrationId}": {
      "schema": {
        "$ref": "#/entities/DefenseSessionRegistration"
      },
      "description": "Stores student registrations for all defense sessions."
    },
     "/graduationDefenseSessions/{sessionId}/council/{councilMemberId}": {
      "schema": {
        "$ref": "#/entities/DefenseCouncil"
      },
      "description": "Stores the members of the main defense council for a specific session."
    },
    "/graduationDefenseSessions/{sessionId}/subCommittees/{subCommitteeId}": {
      "schema": {
        "$ref": "#/entities/DefenseSubCommittee"
      },
      "description": "Stores the sub-committees (panels) for a specific defense session."
    }
  }
}

    